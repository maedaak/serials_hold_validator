# serials_hold_validator　(NACSIS-CAT雑誌所蔵の登録前形式チェック)

## はじめに
serials_hold_validator.pm　は国立情報学研究所のNACSIS-CATに雑誌所蔵を登録する前に、書式が正しいかどうかをチェックするPythonモジュールです。雑誌所蔵の記載形式が巣せいかどうかのチェックと、具体的にどの箇所で問題が発生したかの情報を返します。

## チェックの例
次の入力データを
```
3-4,5-6+
33-44-55,6
4.5(4-6),6(1-2-3),8
66-44,77,90-(aa)
14(1,2-
7),8
88(19).44-55a
*
100-200;30-40+
100.3;4-5(4-5);5,6()
5()-6()
44(10-11,13(10-11)
```
次のとおりチェックします。

```
0 3-4,5-6+
1 <Ng>33-44-55</Ng>,6
1 <Ng>4.5(4-6)</Ng>,6(<Ng>1-2-3</Ng>),8
1 66-44,77,<Ng>90-(aa)</Ng>
1 <Ng>14(1</Ng>,<Ng>2-</Ng>
1 <Ng>7)</Ng>,8
1 <Ng>88(19).44-55a</Ng>
0 *
0 100-200;30-40+
0 <Ng>100.3</Ng>;<Ng>4-5(4-5)</Ng>;5,6()
1 5(<Ng>)-6(</Ng>)
1 <Ng>44(10-11</Ng>,13(10-11)
```


## 使い方
### サンプルスクリプトsample.py
次のとおりsample.pyのあとに入力ファイルを続けて指定してください。
入力は雑誌所蔵を改行区切りでリスト可したテキストファイルです。
入力の具体例はtestinput.txtをご参照ください。
```
python sample.py 入力ファイル
```
### 関数serials_hold_validator
serials_hold_validator.pyを同じディレクトリに（フォルダ）配置します。
ユーザプログラムで、次のように関数serials_hold_validatorを使えるようにします。
```
import serials_hold_validator as shv
```
次のように関数を呼び出してください。引数には解析対象の１雑誌所蔵データを入れます。
```
code, checked = shv.serials_hold_validator('3-10,12()-14(),15-16-17+')
```
codeはエラーの有無を返します。0であればエラーなし、1であればエラーありです。
checedは入力の雑誌所蔵を<Ng>タグでエラー箇所にタグ付けし返します。

## 免責
いち大学図書館関係者として作成したもので、国立情報学研究所の事業との関係はありません。
もし、このツールでエラーがでなくとも、NACSIS-CATでエラーにならないことを保証するものではないことはご承知ください。
また、チェックが完全ではない可能性もあります。


